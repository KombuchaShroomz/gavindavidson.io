<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<div class='content'>
    <div class='main-content'>
        <div class='sidebar'>
            <a href='https://twitter.com/KombuchaShroomz'>
                <img class='social-icon' src="svg/twitter-icon.svg" alt="Twitter icon" />
            </a>
            <a href='https://www.linkedin.com/in/gavin-davidson/'>
                <img class='social-icon' src="svg/linkedin-icon.svg" alt="Linkedin icon" />
            </a>
            <a href='https://github.com/KombuchaShroomz'>
                <img class='social-icon' src="svg/github-icon.svg" alt="Github icon" />
            </a>
        </div>

        <div class='tab-panel' id='left-tab-panel'>
            <div class='tab-label-area'>
                <div class='tab-label default-tab' data_targetTabId='tab-l0'>
                    index.html
                </div>
                <div class='tab-label' data_targetTabId='tab-l1'>
                    django.py
                </div>
            </div>
            <div class='tab-text-area' id='tab-l0'>
                <pre style='white-space: pre-wrap'><code class="Markdown"># Gavin Davidson

## Software Developer

Focussed on backend web services development, but interested in all aspects of product development.

## Melbourne, Victoria

Originally from Scotland, but enjoying life in warmer climes.</code></pre>
            </div>
            <div class='tab-text-area' id='tab-l1'>
                    <pre style='white-space: pre-wrap'><code class="Python">from django.shortcuts import render

def band_listing(request):
    """A view of all bands."""
    bands = models.Band.objects.all()
    return render(request, 'bands/band_listing.html', {'bands': bands})</code></pre>
            </div>
        </div>
        <div class='tab-panel' id='right-tab-panel'>
            <div class='tab-label-area'>
                <div class='tab-label default-tab' data_targetTabId='tab-r0'>
                    ASPNET.cs
                </div>
                <div class='tab-label' data_targetTabId='tab-r1'>
                    cake.php
                </div>
            </div>
            <div class='tab-text-area' id='tab-r0'>
                <pre><code class='C#'>using System;
using System.Collections.Generic;
using Microsoft.AspNetCore.Mvc;
using AutoMapper;
using Gavindavidson.Io.Helpers;
using Microsoft.Extensions.Options;
using System.Text;
using Microsoft.IdentityModel.Tokens;
using System.Security.Claims;
using Microsoft.AspNetCore.Authorization;
using Gavindavidson.Io.Services;
using Gavindavidson.Io.ViewModels;
using Gavindavidson.Io.Entities;

namespace Gavindavidson.Io.Controllers
{
    [Authorize]
    [Route("[controller]")]
    public class UsersController : ControllerBase
    {
        private IUserService _userService;
        private IMapper _mapper;
        private readonly AppSettings _appSettings;

        public UsersController(
            IUserService userService,
            IMapper mapper,
            IOptions<AppSettings> appSettings)
        {
            _userService = userService;
            _mapper = mapper;
            _appSettings = appSettings.Value;
        }

        [HttpGet]
        public IActionResult GetList()
        {
            var users =  _userService.GetAll();
            var userViewModels = _mapper.Map<IList<UserViewModel>>(users);
            return Ok(userViewModels);
        }

        [HttpGet("{id}")]
        public IActionResult GetDetail(int id)
        {
            var user =  _userService.GetById(id);
            var userViewModel = _mapper.Map<UserViewModel>(user);
            return Ok(userViewModel);
        }

        [HttpPut("{id}")]
        public IActionResult Update(int id, [FromBody]UserViewModel userViewModel)
        {
            var user = _mapper.Map<User>(userViewModel);
            user.Id = id;

            try 
            {
                _userService.Update(user, userViewModel.Password);
                return Ok();
            } 
            catch(AppException ex)
            {
                return BadRequest(new { message = ex.Message });
            }
        }
    }
}</code></pre>
            </div>
            <div class='tab-text-area' id='tab-r1'>
                Some php
            </div>
        </div>
    </div>

    <div class='footer'>
        <div class='footer-content'>
            <div class='footer-icon-block left'>
                <img class='footer-icon' src="svg/git-icon.svg" alt="Branch" />
                feature/gavindavidson.io
                <img class='footer-icon' src="svg/sync-icon.svg" alt="Synchronize" />
            </div>

            <div class='footer-icon-block left'>
                <img class='footer-icon' src="svg/x-icon.svg" alt="Errors" />
                0
                <img class='footer-icon' src="svg/warning-icon.svg" alt="Warnings" />
                0
                <img class='footer-icon' src="svg/info-icon.svg" alt="Information" />
                0
            </div>
            <div class='right'>
                HTML
            </div>
        </div>
    </div>
</div>

<script>
    function hideTabs(tabs){
        for (var offset = 0; offset < tabs.length; offset++) {
            tabClassName = tabs[offset].className;
            if (tabClassName.includes("tab-active")){
                tabClassName = tabClassName.replace("tab-active", "tab-inactive");
            }
            else if (!tabClassName.includes("tab-inactive")){
                tabClassName += " tab-inactive";
            }
            tabs[offset].className = tabClassName;
        }
    }

    function resetTabLabels(){
        var activeLabels = document.getElementsByClassName("tab-label-active");

        for (var offset = 0; offset < activeLabels.length; offset++){
            current = activeLabels[offset];
            current.className = current.className.replace(" tab-label-active", "");
        }
    }

    function setActiveTabLabel(tabLabel){
        tabLabel.className += " tab-label-active"
    }

    function setActiveTab(tab){
        tab.className = tab.className.replace("tab-inactive", "tab-active");
    }

    function switchToTab(tabGroup, tabLabel){
        let targetTab = getTabForLabel(tabGroup, tabLabel);

        resetTabLabels();
        hideTabs(tabGroup);
        setActiveTabLabel(tabLabel);
        setActiveTab(targetTab);
    }

    function getTabForLabel(tabs, tabLabel){
        let targetTabId = tabLabel.attributes['data_targetTabId'].value;
        return document.getElementById(targetTabId);
    }

    function initializeTabGroups(tabLables, tabs, defaultTabLabel){
        for (var offset = 0; offset < tabLables.length; offset++){
            let tabLabel = tabLables[offset];
            tabLabel.addEventListener("click", function () {
                switchToTab(tabs, tabLabel);
            }, false);
        }

        switchToTab(tabs, defaultTabLabel)
    }

    let leftTabPanel = document.getElementById("left-tab-panel"); 
    let rightTabPanel = document.getElementById("right-tab-panel"); 

    var leftTabLabels = leftTabPanel.getElementsByClassName("tab-label");
    var rightTabLabels = rightTabPanel.getElementsByClassName("tab-label");

    var leftTabs = leftTabPanel.getElementsByClassName("tab-text-area");
    var rightTabs = rightTabPanel.getElementsByClassName("tab-text-area");

    var leftDefaultTabLabel = leftTabPanel.getElementsByClassName("tab-label default-tab")[0];
    var rightDefaultTabLabel = rightTabPanel.getElementsByClassName("tab-label default-tab")[0];

    initializeTabGroups(leftTabLabels, leftTabs, leftDefaultTabLabel);
    initializeTabGroups(rightTabLabels, rightTabs, rightDefaultTabLabel);

</script>